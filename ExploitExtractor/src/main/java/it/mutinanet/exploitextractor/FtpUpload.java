package it.mutinanet.exploitextractor;

import java.io.File;
import java.io.FileInputStream;

import org.apache.commons.net.ftp.FTPClient;

public class FtpUpload {
	// FTP Program operations start from here
	public static void Upload(String ftpServerName, String ftpServerUsername, String ftpServerPassword, File fileUpload,
			String changeDirectory) {
		FTPClient client = new FTPClient();
		try {
			System.out
					.println("host " + ftpServerName + " user " + ftpServerUsername + " password " + ftpServerPassword);
			client.connect(ftpServerName, 21);
			client.login(ftpServerUsername, ftpServerPassword);
			client.setFileType(FTPClient.BINARY_FILE_TYPE);
			client.changeWorkingDirectory(changeDirectory);
			FileInputStream fis = new FileInputStream(fileUpload);
			;
			if (client != null) {
				try {
					// Define the File with complete path to be uploaded

					System.out.println("Uploading the " + fileUpload.getAbsolutePath() + " to Remote Machine");

					// Upload the file

					client.storeFile(fileUpload.getName(), fis);
					System.out.println(
							"Successfully Uploaded the " + fileUpload.getAbsolutePath() + " File to Remote Machine");
				} catch (Exception e) {
					System.err.println("ERROR : Error in Transfering File to Remote Machine");
					// System.exit(3);
				} finally {
					fis.close();
				}
			}
		} catch (Exception e) {
			System.err.println("ERROR : Error in Connecting to Remote Machine");
			// System.exit(1);
		}

		finally {
			if (client != null) {
				try {
					client.logout();
				} catch (Exception e) {
					System.err.println("ERROR : Error in disconnecting the Remote Machine");
				}
			}
		}
	}

}
